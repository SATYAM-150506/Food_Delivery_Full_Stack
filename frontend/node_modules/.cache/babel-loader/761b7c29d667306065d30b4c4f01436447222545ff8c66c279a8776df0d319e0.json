{"ast":null,"code":"var _jsxFileName = \"D:\\\\food_delievery2\\\\frontend\\\\src\\\\assets\\\\Context\\\\CartContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { AuthContext } from './AuthContext';\nimport cartService from '../services/cartService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [cart, setCart] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const {\n    user,\n    isAuthenticated\n  } = useContext(AuthContext);\n  useEffect(() => {\n    fetchCart();\n  }, [user, isAuthenticated]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const fetchCart = async () => {\n    setLoading(true);\n    try {\n      if (isAuthenticated && user) {\n        console.log('ðŸ”„ Loading cart from backend for user:', user._id);\n        // For authenticated users, fetch from backend\n        const cartData = await cartService.getCart();\n\n        // Check for guest cart to merge\n        const guestCartKey = 'guestCart';\n        const localGuestCart = JSON.parse(localStorage.getItem(guestCartKey) || '[]');\n        if (localGuestCart.length > 0) {\n          console.log('ðŸ”„ Merging guest cart with user cart...');\n          // Merge guest cart with backend cart\n          const mergedCart = mergeGuestCartWithBackend(localGuestCart, cartData.items || []);\n\n          // Save merged cart to backend\n          await cartService.updateCart(mergedCart);\n          setCart(mergedCart);\n\n          // Clear guest cart after merging\n          localStorage.removeItem(guestCartKey);\n          console.log('âœ… Guest cart merged and saved to backend');\n        } else {\n          var _cartData$items;\n          setCart(cartData.items || []);\n          console.log('âœ… User cart loaded from backend:', ((_cartData$items = cartData.items) === null || _cartData$items === void 0 ? void 0 : _cartData$items.length) || 0, 'items');\n        }\n      } else {\n        console.log('ðŸ”„ Loading guest cart from localStorage');\n        // For guests, load from localStorage with user-specific key\n        const guestCartKey = 'guestCart';\n        const localCart = JSON.parse(localStorage.getItem(guestCartKey) || '[]');\n        setCart(localCart);\n        console.log('âœ… Guest cart loaded:', localCart.length, 'items');\n      }\n    } catch (error) {\n      console.error('âŒ Failed to fetch cart:', error);\n      // Fallback to localStorage\n      const fallbackKey = isAuthenticated && user ? `userCart_${user._id}` : 'guestCart';\n      const localCart = JSON.parse(localStorage.getItem(fallbackKey) || '[]');\n      setCart(localCart);\n      console.log('âš ï¸ Using fallback cart from localStorage');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const mergeGuestCartWithBackend = (guestCart, backendCart) => {\n    const mergedCart = [...backendCart];\n    guestCart.forEach(guestItem => {\n      const existingIndex = mergedCart.findIndex(backendItem => {\n        var _backendItem$product;\n        return ((_backendItem$product = backendItem.product) === null || _backendItem$product === void 0 ? void 0 : _backendItem$product._id) === guestItem._id || backendItem._id === guestItem._id;\n      });\n      if (existingIndex > -1) {\n        // Item exists, add quantities\n        mergedCart[existingIndex].quantity += guestItem.quantity;\n      } else {\n        // New item, add to cart\n        mergedCart.push({\n          product: guestItem,\n          quantity: guestItem.quantity,\n          _id: guestItem._id\n        });\n      }\n    });\n    return mergedCart;\n  };\n  const saveToLocalStorage = cartData => {\n    const cartKey = isAuthenticated && user ? `userCart_${user._id}` : 'guestCart';\n    localStorage.setItem(cartKey, JSON.stringify(cartData));\n    console.log('ðŸ’¾ Cart saved to localStorage with key:', cartKey);\n  };\n  const addToCart = async (product, quantity = 1) => {\n    try {\n      console.log('ðŸ›’ Adding to cart:', product.name, 'x', quantity);\n      if (isAuthenticated && user) {\n        // For authenticated users, use backend\n        const updatedCart = await cartService.addToCart(product._id, quantity);\n        setCart(updatedCart.items || updatedCart);\n        console.log('âœ… Added to backend cart');\n      } else {\n        // For guests, use localStorage\n        const currentCart = [...cart];\n        const existingItemIndex = currentCart.findIndex(item => {\n          var _item$product;\n          const itemId = ((_item$product = item.product) === null || _item$product === void 0 ? void 0 : _item$product._id) || item._id;\n          return itemId === product._id;\n        });\n        if (existingItemIndex > -1) {\n          currentCart[existingItemIndex].quantity += quantity;\n        } else {\n          currentCart.push({\n            product: product,\n            quantity,\n            _id: product._id\n          });\n        }\n        setCart(currentCart);\n        saveToLocalStorage(currentCart);\n        console.log('âœ… Added to guest cart');\n      }\n    } catch (error) {\n      console.error('âŒ Failed to add to cart:', error);\n      // Fallback to localStorage even for authenticated users if backend fails\n      const currentCart = [...cart];\n      const existingItemIndex = currentCart.findIndex(item => {\n        var _item$product2;\n        const itemId = ((_item$product2 = item.product) === null || _item$product2 === void 0 ? void 0 : _item$product2._id) || item._id;\n        return itemId === product._id;\n      });\n      if (existingItemIndex > -1) {\n        currentCart[existingItemIndex].quantity += quantity;\n      } else {\n        currentCart.push({\n          product: product,\n          quantity,\n          _id: product._id\n        });\n      }\n      setCart(currentCart);\n      saveToLocalStorage(currentCart);\n      console.log('âš ï¸ Added to fallback cart');\n    }\n  };\n  const updateQuantity = async (productId, quantity) => {\n    try {\n      console.log('ðŸ”„ Updating quantity:', productId, 'to', quantity);\n      if (isAuthenticated && user) {\n        // For authenticated users, use backend\n        const updatedCart = await cartService.updateCartItem(productId, quantity);\n        setCart(updatedCart.items || updatedCart);\n        console.log('âœ… Quantity updated in backend');\n      } else {\n        // For guests, use localStorage\n        const currentCart = cart.map(item => {\n          var _item$product3;\n          const itemId = ((_item$product3 = item.product) === null || _item$product3 === void 0 ? void 0 : _item$product3._id) || item._id;\n          return itemId === productId ? {\n            ...item,\n            quantity\n          } : item;\n        }).filter(item => item.quantity > 0);\n        setCart(currentCart);\n        saveToLocalStorage(currentCart);\n        console.log('âœ… Quantity updated in guest cart');\n      }\n    } catch (error) {\n      console.error('âŒ Failed to update quantity:', error);\n      // Fallback to localStorage\n      const currentCart = cart.map(item => {\n        var _item$product4;\n        const itemId = ((_item$product4 = item.product) === null || _item$product4 === void 0 ? void 0 : _item$product4._id) || item._id;\n        return itemId === productId ? {\n          ...item,\n          quantity\n        } : item;\n      }).filter(item => item.quantity > 0);\n      setCart(currentCart);\n      saveToLocalStorage(currentCart);\n      console.log('âš ï¸ Quantity updated in fallback cart');\n    }\n  };\n  const removeFromCart = async productId => {\n    try {\n      console.log('ðŸ—‘ï¸ Removing from cart:', productId);\n      if (isAuthenticated && user) {\n        // For authenticated users, use backend\n        const updatedCart = await cartService.removeFromCart(productId);\n        setCart(updatedCart.items || updatedCart);\n        console.log('âœ… Removed from backend cart');\n      } else {\n        // For guests, use localStorage\n        const currentCart = cart.filter(item => {\n          var _item$product5;\n          const itemId = ((_item$product5 = item.product) === null || _item$product5 === void 0 ? void 0 : _item$product5._id) || item._id;\n          return itemId !== productId;\n        });\n        setCart(currentCart);\n        saveToLocalStorage(currentCart);\n        console.log('âœ… Removed from guest cart');\n      }\n    } catch (error) {\n      console.error('âŒ Failed to remove from cart:', error);\n      // Fallback to localStorage\n      const currentCart = cart.filter(item => {\n        var _item$product6;\n        const itemId = ((_item$product6 = item.product) === null || _item$product6 === void 0 ? void 0 : _item$product6._id) || item._id;\n        return itemId !== productId;\n      });\n      setCart(currentCart);\n      saveToLocalStorage(currentCart);\n      console.log('âš ï¸ Removed from fallback cart');\n    }\n  };\n  const clearCart = async () => {\n    try {\n      console.log('ðŸ§¹ Clearing cart...');\n      if (isAuthenticated && user) {\n        await cartService.clearCart();\n        console.log('âœ… Backend cart cleared');\n      }\n      setCart([]);\n\n      // Clear all possible cart keys\n      localStorage.removeItem('guestCart');\n      if (user) {\n        localStorage.removeItem(`userCart_${user._id}`);\n      }\n      console.log('âœ… All carts cleared');\n    } catch (error) {\n      console.error('âŒ Failed to clear cart:', error);\n      setCart([]);\n      localStorage.removeItem('guestCart');\n      if (user) {\n        localStorage.removeItem(`userCart_${user._id}`);\n      }\n      console.log('âš ï¸ Fallback cart clear completed');\n    }\n  };\n  const getCartTotal = () => {\n    return cart.reduce((total, item) => {\n      var _item$product7;\n      const price = ((_item$product7 = item.product) === null || _item$product7 === void 0 ? void 0 : _item$product7.price) || item.price;\n      return total + price * item.quantity;\n    }, 0);\n  };\n  const getCartItemsCount = () => {\n    return cart.reduce((total, item) => total + item.quantity, 0);\n  };\n\n  // Additional methods for better cart management\n  const updateCartItemQuantity = async (productId, quantity) => {\n    if (quantity <= 0) {\n      await removeFromCart(productId);\n    } else {\n      await updateQuantity(productId, quantity);\n    }\n  };\n  const getCartItem = productId => {\n    return cart.find(item => {\n      var _item$product8;\n      const itemId = ((_item$product8 = item.product) === null || _item$product8 === void 0 ? void 0 : _item$product8._id) || item._id;\n      return itemId === productId;\n    });\n  };\n  const isInCart = productId => {\n    return cart.some(item => {\n      var _item$product9;\n      const itemId = ((_item$product9 = item.product) === null || _item$product9 === void 0 ? void 0 : _item$product9._id) || item._id;\n      return itemId === productId;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      cartItems: cart,\n      // For backward compatibility\n      loading,\n      addToCart,\n      updateQuantity,\n      updateCartItemQuantity,\n      removeFromCart,\n      clearCart,\n      fetchCart,\n      getCartTotal,\n      getCartItemsCount,\n      getCartItem,\n      isInCart,\n      cartTotal: getCartTotal(),\n      cartCount: getCartItemsCount()\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 280,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"sU0e+Db6kgdEHO/j+EWw+yjgBM0=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","AuthContext","cartService","jsxDEV","_jsxDEV","CartContext","CartProvider","children","_s","cart","setCart","loading","setLoading","user","isAuthenticated","fetchCart","console","log","_id","cartData","getCart","guestCartKey","localGuestCart","JSON","parse","localStorage","getItem","length","mergedCart","mergeGuestCartWithBackend","items","updateCart","removeItem","_cartData$items","localCart","error","fallbackKey","guestCart","backendCart","forEach","guestItem","existingIndex","findIndex","backendItem","_backendItem$product","product","quantity","push","saveToLocalStorage","cartKey","setItem","stringify","addToCart","name","updatedCart","currentCart","existingItemIndex","item","_item$product","itemId","_item$product2","updateQuantity","productId","updateCartItem","map","_item$product3","filter","_item$product4","removeFromCart","_item$product5","_item$product6","clearCart","getCartTotal","reduce","total","_item$product7","price","getCartItemsCount","updateCartItemQuantity","getCartItem","find","_item$product8","isInCart","some","_item$product9","Provider","value","cartItems","cartTotal","cartCount","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/food_delievery2/frontend/src/assets/Context/CartContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport { AuthContext } from './AuthContext';\r\nimport cartService from '../services/cartService';\r\n\r\nexport const CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cart, setCart] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const { user, isAuthenticated } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    fetchCart();\r\n  }, [user, isAuthenticated]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const fetchCart = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (isAuthenticated && user) {\r\n        console.log('ðŸ”„ Loading cart from backend for user:', user._id);\r\n        // For authenticated users, fetch from backend\r\n        const cartData = await cartService.getCart();\r\n        \r\n        // Check for guest cart to merge\r\n        const guestCartKey = 'guestCart';\r\n        const localGuestCart = JSON.parse(localStorage.getItem(guestCartKey) || '[]');\r\n        \r\n        if (localGuestCart.length > 0) {\r\n          console.log('ðŸ”„ Merging guest cart with user cart...');\r\n          // Merge guest cart with backend cart\r\n          const mergedCart = mergeGuestCartWithBackend(localGuestCart, cartData.items || []);\r\n          \r\n          // Save merged cart to backend\r\n          await cartService.updateCart(mergedCart);\r\n          setCart(mergedCart);\r\n          \r\n          // Clear guest cart after merging\r\n          localStorage.removeItem(guestCartKey);\r\n          console.log('âœ… Guest cart merged and saved to backend');\r\n        } else {\r\n          setCart(cartData.items || []);\r\n          console.log('âœ… User cart loaded from backend:', cartData.items?.length || 0, 'items');\r\n        }\r\n      } else {\r\n        console.log('ðŸ”„ Loading guest cart from localStorage');\r\n        // For guests, load from localStorage with user-specific key\r\n        const guestCartKey = 'guestCart';\r\n        const localCart = JSON.parse(localStorage.getItem(guestCartKey) || '[]');\r\n        setCart(localCart);\r\n        console.log('âœ… Guest cart loaded:', localCart.length, 'items');\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Failed to fetch cart:', error);\r\n      // Fallback to localStorage\r\n      const fallbackKey = isAuthenticated && user ? `userCart_${user._id}` : 'guestCart';\r\n      const localCart = JSON.parse(localStorage.getItem(fallbackKey) || '[]');\r\n      setCart(localCart);\r\n      console.log('âš ï¸ Using fallback cart from localStorage');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const mergeGuestCartWithBackend = (guestCart, backendCart) => {\r\n    const mergedCart = [...backendCart];\r\n    \r\n    guestCart.forEach(guestItem => {\r\n      const existingIndex = mergedCart.findIndex(\r\n        backendItem => backendItem.product?._id === guestItem._id || backendItem._id === guestItem._id\r\n      );\r\n      \r\n      if (existingIndex > -1) {\r\n        // Item exists, add quantities\r\n        mergedCart[existingIndex].quantity += guestItem.quantity;\r\n      } else {\r\n        // New item, add to cart\r\n        mergedCart.push({\r\n          product: guestItem,\r\n          quantity: guestItem.quantity,\r\n          _id: guestItem._id\r\n        });\r\n      }\r\n    });\r\n    \r\n    return mergedCart;\r\n  };\r\n\r\n  const saveToLocalStorage = (cartData) => {\r\n    const cartKey = isAuthenticated && user ? `userCart_${user._id}` : 'guestCart';\r\n    localStorage.setItem(cartKey, JSON.stringify(cartData));\r\n    console.log('ðŸ’¾ Cart saved to localStorage with key:', cartKey);\r\n  };\r\n\r\n  const addToCart = async (product, quantity = 1) => {\r\n    try {\r\n      console.log('ðŸ›’ Adding to cart:', product.name, 'x', quantity);\r\n      \r\n      if (isAuthenticated && user) {\r\n        // For authenticated users, use backend\r\n        const updatedCart = await cartService.addToCart(product._id, quantity);\r\n        setCart(updatedCart.items || updatedCart);\r\n        console.log('âœ… Added to backend cart');\r\n      } else {\r\n        // For guests, use localStorage\r\n        const currentCart = [...cart];\r\n        const existingItemIndex = currentCart.findIndex(item => {\r\n          const itemId = item.product?._id || item._id;\r\n          return itemId === product._id;\r\n        });\r\n        \r\n        if (existingItemIndex > -1) {\r\n          currentCart[existingItemIndex].quantity += quantity;\r\n        } else {\r\n          currentCart.push({ \r\n            product: product, \r\n            quantity,\r\n            _id: product._id \r\n          });\r\n        }\r\n        \r\n        setCart(currentCart);\r\n        saveToLocalStorage(currentCart);\r\n        console.log('âœ… Added to guest cart');\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Failed to add to cart:', error);\r\n      // Fallback to localStorage even for authenticated users if backend fails\r\n      const currentCart = [...cart];\r\n      const existingItemIndex = currentCart.findIndex(item => {\r\n        const itemId = item.product?._id || item._id;\r\n        return itemId === product._id;\r\n      });\r\n      \r\n      if (existingItemIndex > -1) {\r\n        currentCart[existingItemIndex].quantity += quantity;\r\n      } else {\r\n        currentCart.push({ \r\n          product: product, \r\n          quantity,\r\n          _id: product._id \r\n        });\r\n      }\r\n      \r\n      setCart(currentCart);\r\n      saveToLocalStorage(currentCart);\r\n      console.log('âš ï¸ Added to fallback cart');\r\n    }\r\n  };\r\n\r\n  const updateQuantity = async (productId, quantity) => {\r\n    try {\r\n      console.log('ðŸ”„ Updating quantity:', productId, 'to', quantity);\r\n      \r\n      if (isAuthenticated && user) {\r\n        // For authenticated users, use backend\r\n        const updatedCart = await cartService.updateCartItem(productId, quantity);\r\n        setCart(updatedCart.items || updatedCart);\r\n        console.log('âœ… Quantity updated in backend');\r\n      } else {\r\n        // For guests, use localStorage\r\n        const currentCart = cart.map(item => {\r\n          const itemId = item.product?._id || item._id;\r\n          return itemId === productId ? { ...item, quantity } : item;\r\n        }).filter(item => item.quantity > 0);\r\n        \r\n        setCart(currentCart);\r\n        saveToLocalStorage(currentCart);\r\n        console.log('âœ… Quantity updated in guest cart');\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Failed to update quantity:', error);\r\n      // Fallback to localStorage\r\n      const currentCart = cart.map(item => {\r\n        const itemId = item.product?._id || item._id;\r\n        return itemId === productId ? { ...item, quantity } : item;\r\n      }).filter(item => item.quantity > 0);\r\n      \r\n      setCart(currentCart);\r\n      saveToLocalStorage(currentCart);\r\n      console.log('âš ï¸ Quantity updated in fallback cart');\r\n    }\r\n  };\r\n\r\n  const removeFromCart = async (productId) => {\r\n    try {\r\n      console.log('ðŸ—‘ï¸ Removing from cart:', productId);\r\n      \r\n      if (isAuthenticated && user) {\r\n        // For authenticated users, use backend\r\n        const updatedCart = await cartService.removeFromCart(productId);\r\n        setCart(updatedCart.items || updatedCart);\r\n        console.log('âœ… Removed from backend cart');\r\n      } else {\r\n        // For guests, use localStorage\r\n        const currentCart = cart.filter(item => {\r\n          const itemId = item.product?._id || item._id;\r\n          return itemId !== productId;\r\n        });\r\n        setCart(currentCart);\r\n        saveToLocalStorage(currentCart);\r\n        console.log('âœ… Removed from guest cart');\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Failed to remove from cart:', error);\r\n      // Fallback to localStorage\r\n      const currentCart = cart.filter(item => {\r\n        const itemId = item.product?._id || item._id;\r\n        return itemId !== productId;\r\n      });\r\n      setCart(currentCart);\r\n      saveToLocalStorage(currentCart);\r\n      console.log('âš ï¸ Removed from fallback cart');\r\n    }\r\n  };\r\n\r\n  const clearCart = async () => {\r\n    try {\r\n      console.log('ðŸ§¹ Clearing cart...');\r\n      \r\n      if (isAuthenticated && user) {\r\n        await cartService.clearCart();\r\n        console.log('âœ… Backend cart cleared');\r\n      }\r\n      \r\n      setCart([]);\r\n      \r\n      // Clear all possible cart keys\r\n      localStorage.removeItem('guestCart');\r\n      if (user) {\r\n        localStorage.removeItem(`userCart_${user._id}`);\r\n      }\r\n      \r\n      console.log('âœ… All carts cleared');\r\n    } catch (error) {\r\n      console.error('âŒ Failed to clear cart:', error);\r\n      setCart([]);\r\n      localStorage.removeItem('guestCart');\r\n      if (user) {\r\n        localStorage.removeItem(`userCart_${user._id}`);\r\n      }\r\n      console.log('âš ï¸ Fallback cart clear completed');\r\n    }\r\n  };\r\n\r\n  const getCartTotal = () => {\r\n    return cart.reduce((total, item) => {\r\n      const price = item.product?.price || item.price;\r\n      return total + (price * item.quantity);\r\n    }, 0);\r\n  };\r\n\r\n  const getCartItemsCount = () => {\r\n    return cart.reduce((total, item) => total + item.quantity, 0);\r\n  };\r\n\r\n  // Additional methods for better cart management\r\n  const updateCartItemQuantity = async (productId, quantity) => {\r\n    if (quantity <= 0) {\r\n      await removeFromCart(productId);\r\n    } else {\r\n      await updateQuantity(productId, quantity);\r\n    }\r\n  };\r\n\r\n  const getCartItem = (productId) => {\r\n    return cart.find(item => {\r\n      const itemId = item.product?._id || item._id;\r\n      return itemId === productId;\r\n    });\r\n  };\r\n\r\n  const isInCart = (productId) => {\r\n    return cart.some(item => {\r\n      const itemId = item.product?._id || item._id;\r\n      return itemId === productId;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider value={{\r\n      cart,\r\n      cartItems: cart, // For backward compatibility\r\n      loading,\r\n      addToCart,\r\n      updateQuantity,\r\n      updateCartItemQuantity,\r\n      removeFromCart,\r\n      clearCart,\r\n      fetchCart,\r\n      getCartTotal,\r\n      getCartItemsCount,\r\n      getCartItem,\r\n      isInCart,\r\n      cartTotal: getCartTotal(),\r\n      cartCount: getCartItemsCount()\r\n    }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"D:/food_delievery2/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useContext,useEffect}from'react';import{useNavigate}from'react-router-dom';import{CartContext}from'../../Context/CartContext';import{AuthContext}from'../../Context/AuthContext';import{useDarkMode}from'../../Context/DarkModeContext';import{useToast}from'../../components/ToastContainer';import{FiArrowLeft,FiMapPin,FiCreditCard,FiCheck,FiTruck,FiShield}from'react-icons/fi';import orderService from'../../services/orderService';import paymentService from'../../services/paymentService';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Checkout=()=>{const{cart,getCartTotal,clearCart}=useContext(CartContext);const{user}=useContext(AuthContext);const{isDarkMode}=useDarkMode();const{showSuccess,showError}=useToast();const navigate=useNavigate();// State for checkout steps\nconst[currentStep,setCurrentStep]=useState(1);const[loading,setLoading]=useState(false);const[stepLoading,setStepLoading]=useState(false);// Address form state\nconst[deliveryAddress,setDeliveryAddress]=useState({fullName:(user===null||user===void 0?void 0:user.name)||'',phone:(user===null||user===void 0?void 0:user.phone)||'',addressLine1:'',addressLine2:'',city:'',state:'',pincode:'',landmark:''});// Payment state\nconst[paymentMethod,setPaymentMethod]=useState('card');const[orderNotes,setOrderNotes]=useState('');// Pricing calculations\nconst subtotal=getCartTotal?getCartTotal():cart.reduce((sum,item)=>{var _item$product;const price=((_item$product=item.product)===null||_item$product===void 0?void 0:_item$product.price)||item.price||0;return sum+price*(item.quantity||1);},0);const deliveryFee=subtotal>299?0:49;const tax=Math.round(subtotal*0.05);// 5% tax\nconst total=subtotal+deliveryFee+tax;useEffect(()=>{// Only redirect if cart is empty (ProtectedRoute handles authentication)\nif(!cart||cart.length===0){navigate('/cart');return;}},[cart,navigate]);const handleAddressChange=(field,value)=>{setDeliveryAddress(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));};const validateAddress=()=>{const required=['fullName','phone','addressLine1','city','state','pincode'];return required.every(field=>deliveryAddress[field].trim()!=='');};const handleAddressSubmit=async()=>{if(!validateAddress()){showError('Please fill all required address fields');return;}setStepLoading(true);// Simulate API call for address validation\nawait new Promise(resolve=>setTimeout(resolve,1500));setStepLoading(false);showSuccess('Address validated successfully!');setCurrentStep(2);};const handlePaymentMethodSubmit=async()=>{setStepLoading(true);// Simulate payment method validation\nawait new Promise(resolve=>setTimeout(resolve,1000));setStepLoading(false);showSuccess('Payment method selected!');setCurrentStep(3);};const handlePlaceOrder=async()=>{if(!validateAddress()){showError('Please fill all required address fields');return;}setLoading(true);try{// Prepare order data\nconst orderData={items:cart.map(item=>{var _item$product2;return{product:item._id||item.id,quantity:item.quantity,price:((_item$product2=item.product)===null||_item$product2===void 0?void 0:_item$product2.price)||item.price||0};}),deliveryAddress,paymentMethod,orderNotes,subtotal,deliveryFee,tax,total,paymentStatus:paymentMethod==='cod'?'pending':'pending'// Will be updated after payment\n};if(paymentMethod==='cod'){// Cash on Delivery - Direct order placement\nconst response=await orderService.createOrder(orderData);if(response.success!==false){clearCart();showSuccess('Order placed successfully! You can pay cash on delivery.');navigate('/orders');}else{throw new Error(response.error||'Failed to place order');}}else{// Online Payment - Razorpay Integration\nconst paymentOrderData={amount:total,currency:'INR',items:orderData.items,address:deliveryAddress,total:total};// Create Razorpay order\nconst paymentResponse=await paymentService.processPayment(paymentOrderData);if(!paymentResponse.success){throw new Error('Failed to create payment order');}// Configure Razorpay options\nconst razorpayOptions={key:paymentResponse.key_id,amount:paymentResponse.razorpayOrder.amount,currency:paymentResponse.currency,order_id:paymentResponse.razorpayOrder.id,name:'Food Delivery',description:\"Order for \".concat(cart.length,\" items\"),image:'/favicon.ico',prefill:{name:user.name||deliveryAddress.fullName,email:user.email||'',contact:deliveryAddress.phone},theme:{color:'#F97316'},handler:async function(response){try{// Verify payment\nconst verifyData={razorpayOrderId:response.razorpay_order_id,razorpayPaymentId:response.razorpay_payment_id,razorpaySignature:response.razorpay_signature};const verifyResponse=await paymentService.verifyPayment(verifyData);if(verifyResponse.message==='Payment verified successfully'){// Now create the actual order with payment details\nconst finalOrderData=_objectSpread(_objectSpread({},orderData),{},{paymentStatus:'completed',paymentId:response.razorpay_payment_id,razorpayOrderId:response.razorpay_order_id});const orderResponse=await orderService.createOrder(finalOrderData);if(orderResponse.success!==false){clearCart();showSuccess('Payment successful! Order placed successfully.');navigate('/orders');}else{throw new Error('Order creation failed after payment');}}else{throw new Error('Payment verification failed');}}catch(error){console.error('Payment verification error:',error);showError('Payment verification failed. Please contact support.');}},modal:{ondismiss:function(){showError('Payment cancelled. Your order was not placed.');setLoading(false);}}};// Open Razorpay payment modal\nconst rzp=new window.Razorpay(razorpayOptions);rzp.open();// Don't set loading to false here as it will be handled in the payment callback\nreturn;}}catch(error){var _error$response,_error$response$data;console.error('Order placement error:',error);showError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||error.message||'Failed to place order');}finally{if(paymentMethod==='cod'){setLoading(false);}}};// If cart is empty, the useEffect will redirect to cart page\nif(!cart||cart.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Your cart is empty\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Add some items to your cart to proceed with checkout\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/products'),className:\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",children:\"Browse Products\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen py-8 \".concat(isDarkMode?'bg-gray-900 text-white':'bg-gray-50 text-gray-900'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto px-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/cart'),className:\"flex items-center mb-4 transition-colors \".concat(isDarkMode?'text-gray-400 hover:text-gray-200':'text-gray-600 hover:text-gray-800'),children:[/*#__PURE__*/_jsx(FiArrowLeft,{className:\"mr-2\"}),\"Back to Cart\"]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold \".concat(isDarkMode?'text-white':'text-gray-800'),children:\"Checkout\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-8 p-6 rounded-xl \".concat(isDarkMode?'bg-gray-800 border border-gray-700':'bg-white border border-gray-200',\" shadow-sm\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold mr-3 transition-all \".concat(currentStep>=1?'bg-green-500 text-white shadow-lg shadow-green-500/25':isDarkMode?'bg-gray-700 text-gray-400':'bg-gray-200 text-gray-600'),children:currentStep>1?/*#__PURE__*/_jsx(FiCheck,{size:16}):'1'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"Delivery Address\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:\"Where should we deliver?\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 mx-4 h-1 rounded-full \".concat(isDarkMode?'bg-gray-700':'bg-gray-200'),children:/*#__PURE__*/_jsx(\"div\",{className:\"h-1 rounded-full transition-all duration-500 \".concat(currentStep>=2?'bg-green-500':'bg-transparent'),style:{width:currentStep>=2?'100%':'0%'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold mr-3 transition-all \".concat(currentStep>=2?'bg-green-500 text-white shadow-lg shadow-green-500/25':isDarkMode?'bg-gray-700 text-gray-400':'bg-gray-200 text-gray-600'),children:currentStep>2?/*#__PURE__*/_jsx(FiCheck,{size:16}):'2'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"Payment Method\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:\"Choose how to pay\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 mx-4 h-1 rounded-full \".concat(isDarkMode?'bg-gray-700':'bg-gray-200'),children:/*#__PURE__*/_jsx(\"div\",{className:\"h-1 rounded-full transition-all duration-500 \".concat(currentStep>=3?'bg-green-500':'bg-transparent'),style:{width:currentStep>=3?'100%':'0%'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold mr-3 transition-all \".concat(currentStep>=3?'bg-green-500 text-white shadow-lg shadow-green-500/25':isDarkMode?'bg-gray-700 text-gray-400':'bg-gray-200 text-gray-600'),children:currentStep>3?/*#__PURE__*/_jsx(FiCheck,{size:16}):'3'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"Confirm Order\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:\"Review and place order\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2\",children:[currentStep===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl shadow-lg p-6 border transition-all \".concat(isDarkMode?'bg-gray-800 border-gray-700':'bg-white border-gray-100'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-6\",children:[/*#__PURE__*/_jsx(FiMapPin,{className:\"w-6 h-6 mr-3 text-orange-500\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold \".concat(isDarkMode?'text-white':'text-gray-800'),children:\"Delivery Address\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2 \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"Full Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.fullName,onChange:e=>handleAddressChange('fullName',e.target.value),className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all \".concat(isDarkMode?'bg-gray-700 border-gray-600 text-white placeholder-gray-400':'bg-white border-gray-300 text-gray-900'),placeholder:\"Enter your full name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2 \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"Phone Number *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:deliveryAddress.phone,onChange:e=>handleAddressChange('phone',e.target.value),className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all \".concat(isDarkMode?'bg-gray-700 border-gray-600 text-white placeholder-gray-400':'bg-white border-gray-300 text-gray-900'),placeholder:\"Enter your phone number\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2 \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"Address Line 1 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.addressLine1,onChange:e=>handleAddressChange('addressLine1',e.target.value),placeholder:\"House/Flat No., Street Name\",className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all \".concat(isDarkMode?'bg-gray-700 border-gray-600 text-white placeholder-gray-400':'bg-white border-gray-300 text-gray-900'),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2 \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"Address Line 2 (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.addressLine2,onChange:e=>handleAddressChange('addressLine2',e.target.value),placeholder:\"Apartment, Floor, Building (Optional)\",className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all \".concat(isDarkMode?'bg-gray-700 border-gray-600 text-white placeholder-gray-400':'bg-white border-gray-300 text-gray-900')})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2 \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"City *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.city,onChange:e=>handleAddressChange('city',e.target.value),className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all \".concat(isDarkMode?'bg-gray-700 border-gray-600 text-white placeholder-gray-400':'bg-white border-gray-300 text-gray-900'),placeholder:\"Enter city\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2 \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"State *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.state,onChange:e=>handleAddressChange('state',e.target.value),className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all \".concat(isDarkMode?'bg-gray-700 border-gray-600 text-white placeholder-gray-400':'bg-white border-gray-300 text-gray-900'),placeholder:\"Enter state\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2 \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"PIN Code *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.pincode,onChange:e=>handleAddressChange('pincode',e.target.value),className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all \".concat(isDarkMode?'bg-gray-700 border-gray-600 text-white placeholder-gray-400':'bg-white border-gray-300 text-gray-900'),placeholder:\"Enter PIN code\",maxLength:\"6\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2 \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"Landmark (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.landmark,onChange:e=>handleAddressChange('landmark',e.target.value),placeholder:\"Near bus stop, mall, etc.\",className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all \".concat(isDarkMode?'bg-gray-700 border-gray-600 text-white placeholder-gray-400':'bg-white border-gray-300 text-gray-900')})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddressSubmit,disabled:!validateAddress()||stepLoading,className:\"w-full py-4 px-6 rounded-xl font-semibold text-white transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed \".concat(isDarkMode?'bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 shadow-lg shadow-orange-500/25':'bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 shadow-lg hover:shadow-xl'),children:stepLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"}),\"Validating Address...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\"Continue to Payment\",/*#__PURE__*/_jsx(FiArrowLeft,{className:\"ml-2 rotate-180 w-4 h-4 inline\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Address Line 2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.addressLine2,onChange:e=>handleAddressChange('addressLine2',e.target.value),placeholder:\"Apartment, Suite, etc. (optional)\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"City *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.city,onChange:e=>handleAddressChange('city',e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"State *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.state,onChange:e=>handleAddressChange('state',e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Pincode *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.pincode,onChange:e=>handleAddressChange('pincode',e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Landmark\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.landmark,onChange:e=>handleAddressChange('landmark',e.target.value),placeholder:\"Near bus stop, mall, etc.\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"})]})]}),validateAddress()&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentStep(2),className:\"mt-6 bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition-colors font-semibold flex items-center\",children:[\"Continue to Payment\",/*#__PURE__*/_jsx(FiArrowLeft,{className:\"ml-2 rotate-180\"})]})]}),currentStep>=2&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6 border border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3 \".concat(currentStep>=2?'bg-green-500 text-white':'bg-gray-200 text-gray-600'),children:currentStep>2?/*#__PURE__*/_jsx(FiCheck,{size:16}):'2'}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-800\",children:\"Payment Method\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:border-orange-500 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"cod\",checked:paymentMethod==='cod',onChange:e=>setPaymentMethod(e.target.value),className:\"mr-4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(FiTruck,{className:\"text-green-500 mr-3\",size:24}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:\"Cash on Delivery\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Pay when your order arrives\"})]})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:border-orange-500 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"card\",checked:paymentMethod==='card',onChange:e=>setPaymentMethod(e.target.value),className:\"mr-4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(FiCreditCard,{className:\"text-blue-500 mr-3\",size:24}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:\"Credit/Debit Card\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Secure online payment\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentStep(3),className:\"mt-6 bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition-colors font-semibold flex items-center\",children:[\"Review Order\",/*#__PURE__*/_jsx(FiArrowLeft,{className:\"ml-2 rotate-180\"})]})]}),currentStep>=3&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6 border border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center text-sm font-bold mr-3\",children:\"3\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-800\",children:\"Order Notes (Optional)\"})]}),/*#__PURE__*/_jsx(\"textarea\",{value:orderNotes,onChange:e=>setOrderNotes(e.target.value),placeholder:\"Any special instructions for your order...\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\",rows:\"4\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6 border border-gray-100 sticky top-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-6\",children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 mb-6\",children:cart.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-2 border-b border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-800\",children:item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Qty: \",item.quantity]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-800\",children:[\"\\u20B9\",item.price*item.quantity]})]},item._id||item.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Subtotal\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-800\",children:[\"\\u20B9\",subtotal]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Delivery Fee\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:deliveryFee===0?/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"FREE\"}):\"\\u20B9\".concat(deliveryFee)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Tax\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-800\",children:[\"\\u20B9\",tax]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 pt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-lg font-bold\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-800\",children:[\"\\u20B9\",total]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-green-600 mb-2\",children:[/*#__PURE__*/_jsx(FiShield,{className:\"mr-2\",size:16}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Secure Checkout\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600\",children:\"Your payment information is encrypted and secure\"})]}),currentStep>=3&&validateAddress()&&/*#__PURE__*/_jsx(\"button\",{onClick:handlePlaceOrder,disabled:loading,className:\"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold py-4 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-300 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?'Placing Order...':\"Place Order \\u2022 \\u20B9\".concat(total)}),\")}\",currentStep===2&&/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl shadow-lg p-6 border transition-all \".concat(isDarkMode?'bg-gray-800 border-gray-700':'bg-white border-gray-100'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-6\",children:[/*#__PURE__*/_jsx(FiCreditCard,{className:\"w-6 h-6 mr-3 text-green-500\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold \".concat(isDarkMode?'text-white':'text-gray-800'),children:\"Payment Method\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-2 rounded-xl cursor-pointer transition-all \".concat(paymentMethod==='cod'?'border-green-500 bg-green-50 dark:bg-green-900/20':isDarkMode?'border-gray-700 bg-gray-700/50':'border-gray-200 bg-gray-50'),onClick:()=>setPaymentMethod('cod'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"cod\",checked:paymentMethod==='cod',onChange:()=>setPaymentMethod('cod'),className:\"mr-3 text-green-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"Cash on Delivery\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:\"Pay with cash when your order arrives\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-2 rounded-xl cursor-pointer transition-all \".concat(paymentMethod==='card'?'border-green-500 bg-green-50 dark:bg-green-900/20':isDarkMode?'border-gray-700 bg-gray-700/50':'border-gray-200 bg-gray-50'),onClick:()=>setPaymentMethod('card'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"card\",checked:paymentMethod==='card',onChange:()=>setPaymentMethod('card'),className:\"mr-3 text-green-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"Online Payment\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:\"Pay securely with UPI, Cards, Net Banking\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-green-600 font-medium\",children:\"Secure\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentStep(1),className:\"flex-1 py-3 px-6 rounded-xl font-semibold transition-all \".concat(isDarkMode?'bg-gray-700 text-gray-300 hover:bg-gray-600':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"\\u2190 Back\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePaymentMethodSubmit,disabled:stepLoading,className:\"flex-1 py-3 px-6 rounded-xl font-semibold text-white transition-all disabled:opacity-50 \".concat(isDarkMode?'bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 shadow-lg shadow-green-500/25':'bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 shadow-lg hover:shadow-xl'),children:stepLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"}),\"Processing...\"]}):'Continue to Review'})]})]}),currentStep===3&&/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl shadow-lg p-6 border transition-all \".concat(isDarkMode?'bg-gray-800 border-gray-700':'bg-white border-gray-100'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-6\",children:[/*#__PURE__*/_jsx(FiCheck,{className:\"w-6 h-6 mr-3 text-blue-500\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold \".concat(isDarkMode?'text-white':'text-gray-800'),children:\"Review Your Order\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg mb-4 \".concat(isDarkMode?'bg-gray-700':'bg-gray-50'),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2 \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"Delivery Address\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:[deliveryAddress.fullName,/*#__PURE__*/_jsx(\"br\",{}),deliveryAddress.addressLine1,deliveryAddress.addressLine2&&\", \".concat(deliveryAddress.addressLine2),/*#__PURE__*/_jsx(\"br\",{}),deliveryAddress.city,\", \",deliveryAddress.state,\" - \",deliveryAddress.pincode,/*#__PURE__*/_jsx(\"br\",{}),\"Phone: \",deliveryAddress.phone]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg mb-6 \".concat(isDarkMode?'bg-gray-700':'bg-gray-50'),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2 \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"Payment Method\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:paymentMethod==='cod'?'Cash on Delivery':'Online Payment (Razorpay)'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2 \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"Order Notes (Optional)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:orderNotes,onChange:e=>setOrderNotes(e.target.value),placeholder:\"Any special instructions for your order...\",className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none \".concat(isDarkMode?'bg-gray-700 border-gray-600 text-white placeholder-gray-400':'bg-white border-gray-300 text-gray-900'),rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentStep(2),className:\"flex-1 py-3 px-6 rounded-xl font-semibold transition-all \".concat(isDarkMode?'bg-gray-700 text-gray-300 hover:bg-gray-600':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"\\u2190 Back\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePlaceOrder,disabled:loading,className:\"flex-1 py-4 px-6 rounded-xl font-bold text-white transition-all disabled:opacity-50 \".concat(isDarkMode?'bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 shadow-lg shadow-blue-500/25':'bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 shadow-lg hover:shadow-xl'),children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"}),\"Placing Order...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FiShield,{className:\"w-5 h-5 mr-2 inline\"}),\"Place Order - \\u20B9\",total.toFixed(2)]})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl shadow-lg p-6 border sticky top-4 \".concat(isDarkMode?'bg-gray-800 border-gray-700':'bg-white border-gray-100'),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4 \".concat(isDarkMode?'text-white':'text-gray-800'),children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 mb-4 max-h-60 overflow-y-auto\",children:cart.map(item=>{var _item$product3,_item$product4;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-sm \".concat(isDarkMode?'text-white':'text-gray-900'),children:((_item$product3=item.product)===null||_item$product3===void 0?void 0:_item$product3.name)||item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:[\"Qty: \",item.quantity||1]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-sm \".concat(isDarkMode?'text-white':'text-gray-900'),children:[\"\\u20B9\",((((_item$product4=item.product)===null||_item$product4===void 0?void 0:_item$product4.price)||item.price||0)*(item.quantity||1)).toFixed(2)]})]},item._id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-4 space-y-2 \".concat(isDarkMode?'border-gray-700':'border-gray-200'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:isDarkMode?'text-gray-400':'text-gray-600',children:\"Subtotal\"}),/*#__PURE__*/_jsxs(\"span\",{className:isDarkMode?'text-white':'text-gray-900',children:[\"\\u20B9\",subtotal.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:isDarkMode?'text-gray-400':'text-gray-600',children:\"Delivery Fee\"}),/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(deliveryFee===0?'text-green-500':'',\" \").concat(isDarkMode?'text-white':'text-gray-900'),children:deliveryFee===0?'FREE':\"\\u20B9\".concat(deliveryFee.toFixed(2))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:isDarkMode?'text-gray-400':'text-gray-600',children:\"Tax (5%)\"}),/*#__PURE__*/_jsxs(\"span\",{className:isDarkMode?'text-white':'text-gray-900',children:[\"\\u20B9\",tax.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-lg font-bold pt-2 border-t \".concat(isDarkMode?'border-gray-700 text-white':'border-gray-200 text-gray-900'),children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",total.toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3 rounded-lg text-center \".concat(isDarkMode?'bg-green-900/20':'bg-green-50'),children:[/*#__PURE__*/_jsx(FiShield,{className:\"w-5 h-5 mx-auto mb-1 text-green-500\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-green-600 font-medium\",children:\"Your payment information is encrypted and secure\"})]})]})})]})]});};export default Checkout;","map":{"version":3,"names":["React","useState","useContext","useEffect","useNavigate","CartContext","AuthContext","useDarkMode","useToast","FiArrowLeft","FiMapPin","FiCreditCard","FiCheck","FiTruck","FiShield","orderService","paymentService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Checkout","cart","getCartTotal","clearCart","user","isDarkMode","showSuccess","showError","navigate","currentStep","setCurrentStep","loading","setLoading","stepLoading","setStepLoading","deliveryAddress","setDeliveryAddress","fullName","name","phone","addressLine1","addressLine2","city","state","pincode","landmark","paymentMethod","setPaymentMethod","orderNotes","setOrderNotes","subtotal","reduce","sum","item","_item$product","price","product","quantity","deliveryFee","tax","Math","round","total","length","handleAddressChange","field","value","prev","_objectSpread","validateAddress","required","every","trim","handleAddressSubmit","Promise","resolve","setTimeout","handlePaymentMethodSubmit","handlePlaceOrder","orderData","items","map","_item$product2","_id","id","paymentStatus","response","createOrder","success","Error","error","paymentOrderData","amount","currency","address","paymentResponse","processPayment","razorpayOptions","key","key_id","razorpayOrder","order_id","description","concat","image","prefill","email","contact","theme","color","handler","verifyData","razorpayOrderId","razorpay_order_id","razorpayPaymentId","razorpay_payment_id","razorpaySignature","razorpay_signature","verifyResponse","verifyPayment","message","finalOrderData","paymentId","orderResponse","console","modal","ondismiss","rzp","window","Razorpay","open","_error$response","_error$response$data","data","className","children","onClick","size","style","width","type","onChange","e","target","placeholder","maxLength","disabled","checked","rows","toFixed","_item$product3","_item$product4"],"sources":["D:/food_delievery2/frontend/src/assets/pages/Payment/Checkout.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { CartContext } from '../../Context/CartContext';\r\nimport { AuthContext } from '../../Context/AuthContext';\r\nimport { useDarkMode } from '../../Context/DarkModeContext';\r\nimport { useToast } from '../../components/ToastContainer';\r\nimport { FiArrowLeft, FiMapPin, FiCreditCard, FiCheck, FiTruck, FiShield } from 'react-icons/fi';\r\nimport orderService from '../../services/orderService';\r\nimport paymentService from '../../services/paymentService';\r\n\r\nconst Checkout = () => {\r\n  const { cart, getCartTotal, clearCart } = useContext(CartContext);\r\n  const { user } = useContext(AuthContext);\r\n  const { isDarkMode } = useDarkMode();\r\n  const { showSuccess, showError } = useToast();\r\n  const navigate = useNavigate();\r\n\r\n  // State for checkout steps\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [stepLoading, setStepLoading] = useState(false);\r\n\r\n  // Address form state\r\n  const [deliveryAddress, setDeliveryAddress] = useState({\r\n    fullName: user?.name || '',\r\n    phone: user?.phone || '',\r\n    addressLine1: '',\r\n    addressLine2: '',\r\n    city: '',\r\n    state: '',\r\n    pincode: '',\r\n    landmark: ''\r\n  });\r\n\r\n  // Payment state\r\n  const [paymentMethod, setPaymentMethod] = useState('card');\r\n  const [orderNotes, setOrderNotes] = useState('');\r\n\r\n  // Pricing calculations\r\n  const subtotal = getCartTotal ? getCartTotal() : cart.reduce((sum, item) => {\r\n    const price = item.product?.price || item.price || 0;\r\n    return sum + (price * (item.quantity || 1));\r\n  }, 0);\r\n  const deliveryFee = subtotal > 299 ? 0 : 49;\r\n  const tax = Math.round(subtotal * 0.05); // 5% tax\r\n  const total = subtotal + deliveryFee + tax;\r\n\r\n  useEffect(() => {\r\n    // Only redirect if cart is empty (ProtectedRoute handles authentication)\r\n    if (!cart || cart.length === 0) {\r\n      navigate('/cart');\r\n      return;\r\n    }\r\n  }, [cart, navigate]);\r\n\r\n  const handleAddressChange = (field, value) => {\r\n    setDeliveryAddress(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const validateAddress = () => {\r\n    const required = ['fullName', 'phone', 'addressLine1', 'city', 'state', 'pincode'];\r\n    return required.every(field => deliveryAddress[field].trim() !== '');\r\n  };\r\n\r\n  const handleAddressSubmit = async () => {\r\n    if (!validateAddress()) {\r\n      showError('Please fill all required address fields');\r\n      return;\r\n    }\r\n    \r\n    setStepLoading(true);\r\n    // Simulate API call for address validation\r\n    await new Promise(resolve => setTimeout(resolve, 1500));\r\n    setStepLoading(false);\r\n    \r\n    showSuccess('Address validated successfully!');\r\n    setCurrentStep(2);\r\n  };\r\n\r\n  const handlePaymentMethodSubmit = async () => {\r\n    setStepLoading(true);\r\n    // Simulate payment method validation\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    setStepLoading(false);\r\n    \r\n    showSuccess('Payment method selected!');\r\n    setCurrentStep(3);\r\n  };\r\n\r\n  const handlePlaceOrder = async () => {\r\n    if (!validateAddress()) {\r\n      showError('Please fill all required address fields');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Prepare order data\r\n      const orderData = {\r\n        items: cart.map(item => ({\r\n          product: item._id || item.id,\r\n          quantity: item.quantity,\r\n          price: item.product?.price || item.price || 0\r\n        })),\r\n        deliveryAddress,\r\n        paymentMethod,\r\n        orderNotes,\r\n        subtotal,\r\n        deliveryFee,\r\n        tax,\r\n        total,\r\n        paymentStatus: paymentMethod === 'cod' ? 'pending' : 'pending' // Will be updated after payment\r\n      };\r\n\r\n      if (paymentMethod === 'cod') {\r\n        // Cash on Delivery - Direct order placement\r\n        const response = await orderService.createOrder(orderData);\r\n        \r\n        if (response.success !== false) {\r\n          clearCart();\r\n          showSuccess('Order placed successfully! You can pay cash on delivery.');\r\n          navigate('/orders');\r\n        } else {\r\n          throw new Error(response.error || 'Failed to place order');\r\n        }\r\n      } else {\r\n        // Online Payment - Razorpay Integration\r\n        const paymentOrderData = {\r\n          amount: total,\r\n          currency: 'INR',\r\n          items: orderData.items,\r\n          address: deliveryAddress,\r\n          total: total\r\n        };\r\n\r\n        // Create Razorpay order\r\n        const paymentResponse = await paymentService.processPayment(paymentOrderData);\r\n        \r\n        if (!paymentResponse.success) {\r\n          throw new Error('Failed to create payment order');\r\n        }\r\n\r\n        // Configure Razorpay options\r\n        const razorpayOptions = {\r\n          key: paymentResponse.key_id,\r\n          amount: paymentResponse.razorpayOrder.amount,\r\n          currency: paymentResponse.currency,\r\n          order_id: paymentResponse.razorpayOrder.id,\r\n          name: 'Food Delivery',\r\n          description: `Order for ${cart.length} items`,\r\n          image: '/favicon.ico',\r\n          prefill: {\r\n            name: user.name || deliveryAddress.fullName,\r\n            email: user.email || '',\r\n            contact: deliveryAddress.phone\r\n          },\r\n          theme: {\r\n            color: '#F97316'\r\n          },\r\n          handler: async function (response) {\r\n            try {\r\n              // Verify payment\r\n              const verifyData = {\r\n                razorpayOrderId: response.razorpay_order_id,\r\n                razorpayPaymentId: response.razorpay_payment_id,\r\n                razorpaySignature: response.razorpay_signature\r\n              };\r\n\r\n              const verifyResponse = await paymentService.verifyPayment(verifyData);\r\n              \r\n              if (verifyResponse.message === 'Payment verified successfully') {\r\n                // Now create the actual order with payment details\r\n                const finalOrderData = {\r\n                  ...orderData,\r\n                  paymentStatus: 'completed',\r\n                  paymentId: response.razorpay_payment_id,\r\n                  razorpayOrderId: response.razorpay_order_id\r\n                };\r\n\r\n                const orderResponse = await orderService.createOrder(finalOrderData);\r\n                \r\n                if (orderResponse.success !== false) {\r\n                  clearCart();\r\n                  showSuccess('Payment successful! Order placed successfully.');\r\n                  navigate('/orders');\r\n                } else {\r\n                  throw new Error('Order creation failed after payment');\r\n                }\r\n              } else {\r\n                throw new Error('Payment verification failed');\r\n              }\r\n            } catch (error) {\r\n              console.error('Payment verification error:', error);\r\n              showError('Payment verification failed. Please contact support.');\r\n            }\r\n          },\r\n          modal: {\r\n            ondismiss: function () {\r\n              showError('Payment cancelled. Your order was not placed.');\r\n              setLoading(false);\r\n            }\r\n          }\r\n        };\r\n\r\n        // Open Razorpay payment modal\r\n        const rzp = new window.Razorpay(razorpayOptions);\r\n        rzp.open();\r\n        \r\n        // Don't set loading to false here as it will be handled in the payment callback\r\n        return;\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Order placement error:', error);\r\n      showError(error.response?.data?.error || error.message || 'Failed to place order');\r\n    } finally {\r\n      if (paymentMethod === 'cod') {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  // If cart is empty, the useEffect will redirect to cart page\r\n  if (!cart || cart.length === 0) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold mb-4\">Your cart is empty</h2>\r\n          <p className=\"text-gray-600 mb-4\">Add some items to your cart to proceed with checkout</p>\r\n          <button \r\n            onClick={() => navigate('/products')}\r\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n          >\r\n            Browse Products\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`min-h-screen py-8 ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-gray-50 text-gray-900'}`}>\r\n      <div className=\"max-w-6xl mx-auto px-4\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <button\r\n            onClick={() => navigate('/cart')}\r\n            className={`flex items-center mb-4 transition-colors ${\r\n              isDarkMode ? 'text-gray-400 hover:text-gray-200' : 'text-gray-600 hover:text-gray-800'\r\n            }`}\r\n          >\r\n            <FiArrowLeft className=\"mr-2\" />\r\n            Back to Cart\r\n          </button>\r\n          <h1 className={`text-3xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-800'}`}>Checkout</h1>\r\n        </div>\r\n\r\n        {/* Step Progress Bar */}\r\n        <div className={`mb-8 p-6 rounded-xl ${isDarkMode ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'} shadow-sm`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            {/* Step 1 */}\r\n            <div className=\"flex items-center\">\r\n              <div className={`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold mr-3 transition-all ${\r\n                currentStep >= 1 \r\n                  ? 'bg-green-500 text-white shadow-lg shadow-green-500/25' \r\n                  : isDarkMode ? 'bg-gray-700 text-gray-400' : 'bg-gray-200 text-gray-600'\r\n              }`}>\r\n                {currentStep > 1 ? <FiCheck size={16} /> : '1'}\r\n              </div>\r\n              <div>\r\n                <p className={`font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Delivery Address</p>\r\n                <p className={`text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Where should we deliver?</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Progress Line */}\r\n            <div className={`flex-1 mx-4 h-1 rounded-full ${isDarkMode ? 'bg-gray-700' : 'bg-gray-200'}`}>\r\n              <div \r\n                className={`h-1 rounded-full transition-all duration-500 ${\r\n                  currentStep >= 2 ? 'bg-green-500' : 'bg-transparent'\r\n                }`} \r\n                style={{ width: currentStep >= 2 ? '100%' : '0%' }}\r\n              />\r\n            </div>\r\n\r\n            {/* Step 2 */}\r\n            <div className=\"flex items-center\">\r\n              <div className={`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold mr-3 transition-all ${\r\n                currentStep >= 2 \r\n                  ? 'bg-green-500 text-white shadow-lg shadow-green-500/25' \r\n                  : isDarkMode ? 'bg-gray-700 text-gray-400' : 'bg-gray-200 text-gray-600'\r\n              }`}>\r\n                {currentStep > 2 ? <FiCheck size={16} /> : '2'}\r\n              </div>\r\n              <div>\r\n                <p className={`font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Payment Method</p>\r\n                <p className={`text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Choose how to pay</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Progress Line */}\r\n            <div className={`flex-1 mx-4 h-1 rounded-full ${isDarkMode ? 'bg-gray-700' : 'bg-gray-200'}`}>\r\n              <div \r\n                className={`h-1 rounded-full transition-all duration-500 ${\r\n                  currentStep >= 3 ? 'bg-green-500' : 'bg-transparent'\r\n                }`} \r\n                style={{ width: currentStep >= 3 ? '100%' : '0%' }}\r\n              />\r\n            </div>\r\n\r\n            {/* Step 3 */}\r\n            <div className=\"flex items-center\">\r\n              <div className={`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold mr-3 transition-all ${\r\n                currentStep >= 3 \r\n                  ? 'bg-green-500 text-white shadow-lg shadow-green-500/25' \r\n                  : isDarkMode ? 'bg-gray-700 text-gray-400' : 'bg-gray-200 text-gray-600'\r\n              }`}>\r\n                {currentStep > 3 ? <FiCheck size={16} /> : '3'}\r\n              </div>\r\n              <div>\r\n                <p className={`font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Confirm Order</p>\r\n                <p className={`text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Review and place order</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          {/* Left Column - Step Forms */}\r\n          <div className=\"lg:col-span-2\">\r\n            \r\n            {/* Step 1: Delivery Address */}\r\n            {currentStep === 1 && (\r\n              <div className={`rounded-xl shadow-lg p-6 border transition-all ${\r\n                isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'\r\n              }`}>\r\n                <div className=\"flex items-center mb-6\">\r\n                  <FiMapPin className=\"w-6 h-6 mr-3 text-orange-500\" />\r\n                  <h2 className={`text-xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-800'}`}>\r\n                    Delivery Address\r\n                  </h2>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n                  <div>\r\n                    <label className={`block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                      Full Name *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={deliveryAddress.fullName}\r\n                      onChange={(e) => handleAddressChange('fullName', e.target.value)}\r\n                      className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${\r\n                        isDarkMode \r\n                          ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' \r\n                          : 'bg-white border-gray-300 text-gray-900'\r\n                      }`}\r\n                      placeholder=\"Enter your full name\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className={`block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                      Phone Number *\r\n                    </label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      value={deliveryAddress.phone}\r\n                      onChange={(e) => handleAddressChange('phone', e.target.value)}\r\n                      className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${\r\n                        isDarkMode \r\n                          ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' \r\n                          : 'bg-white border-gray-300 text-gray-900'\r\n                      }`}\r\n                      placeholder=\"Enter your phone number\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"md:col-span-2\">\r\n                    <label className={`block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                      Address Line 1 *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={deliveryAddress.addressLine1}\r\n                      onChange={(e) => handleAddressChange('addressLine1', e.target.value)}\r\n                      placeholder=\"House/Flat No., Street Name\"\r\n                      className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${\r\n                        isDarkMode \r\n                          ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' \r\n                          : 'bg-white border-gray-300 text-gray-900'\r\n                      }`}\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"md:col-span-2\">\r\n                    <label className={`block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                      Address Line 2 (Optional)\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={deliveryAddress.addressLine2}\r\n                      onChange={(e) => handleAddressChange('addressLine2', e.target.value)}\r\n                      placeholder=\"Apartment, Floor, Building (Optional)\"\r\n                      className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${\r\n                        isDarkMode \r\n                          ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' \r\n                          : 'bg-white border-gray-300 text-gray-900'\r\n                      }`}\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className={`block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                      City *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={deliveryAddress.city}\r\n                      onChange={(e) => handleAddressChange('city', e.target.value)}\r\n                      className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${\r\n                        isDarkMode \r\n                          ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' \r\n                          : 'bg-white border-gray-300 text-gray-900'\r\n                      }`}\r\n                      placeholder=\"Enter city\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className={`block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                      State *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={deliveryAddress.state}\r\n                      onChange={(e) => handleAddressChange('state', e.target.value)}\r\n                      className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${\r\n                        isDarkMode \r\n                          ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' \r\n                          : 'bg-white border-gray-300 text-gray-900'\r\n                      }`}\r\n                      placeholder=\"Enter state\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className={`block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                      PIN Code *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={deliveryAddress.pincode}\r\n                      onChange={(e) => handleAddressChange('pincode', e.target.value)}\r\n                      className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${\r\n                        isDarkMode \r\n                          ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' \r\n                          : 'bg-white border-gray-300 text-gray-900'\r\n                      }`}\r\n                      placeholder=\"Enter PIN code\"\r\n                      maxLength=\"6\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className={`block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                      Landmark (Optional)\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={deliveryAddress.landmark}\r\n                      onChange={(e) => handleAddressChange('landmark', e.target.value)}\r\n                      placeholder=\"Near bus stop, mall, etc.\"\r\n                      className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${\r\n                        isDarkMode \r\n                          ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' \r\n                          : 'bg-white border-gray-300 text-gray-900'\r\n                      }`}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={handleAddressSubmit}\r\n                  disabled={!validateAddress() || stepLoading}\r\n                  className={`w-full py-4 px-6 rounded-xl font-semibold text-white transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${\r\n                    isDarkMode\r\n                      ? 'bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 shadow-lg shadow-orange-500/25'\r\n                      : 'bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 shadow-lg hover:shadow-xl'\r\n                  }`}\r\n                >\r\n                  {stepLoading ? (\r\n                    <div className=\"flex items-center justify-center\">\r\n                      <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"></div>\r\n                      Validating Address...\r\n                    </div>\r\n                  ) : (\r\n                    <>\r\n                      Continue to Payment\r\n                      <FiArrowLeft className=\"ml-2 rotate-180 w-4 h-4 inline\" />\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Address Line 2\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={deliveryAddress.addressLine2}\r\n                    onChange={(e) => handleAddressChange('addressLine2', e.target.value)}\r\n                    placeholder=\"Apartment, Suite, etc. (optional)\"\r\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    City *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={deliveryAddress.city}\r\n                    onChange={(e) => handleAddressChange('city', e.target.value)}\r\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    State *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={deliveryAddress.state}\r\n                    onChange={(e) => handleAddressChange('state', e.target.value)}\r\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Pincode *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={deliveryAddress.pincode}\r\n                    onChange={(e) => handleAddressChange('pincode', e.target.value)}\r\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Landmark\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={deliveryAddress.landmark}\r\n                    onChange={(e) => handleAddressChange('landmark', e.target.value)}\r\n                    placeholder=\"Near bus stop, mall, etc.\"\r\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {validateAddress() && (\r\n                <button\r\n                  onClick={() => setCurrentStep(2)}\r\n                  className=\"mt-6 bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition-colors font-semibold flex items-center\"\r\n                >\r\n                  Continue to Payment\r\n                  <FiArrowLeft className=\"ml-2 rotate-180\" />\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {/* Step 2: Payment Method */}\r\n            {currentStep >= 2 && (\r\n              <div className=\"bg-white rounded-xl shadow-lg p-6 border border-gray-100\">\r\n                <div className=\"flex items-center mb-6\">\r\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3 ${\r\n                    currentStep >= 2 ? 'bg-green-500 text-white' : 'bg-gray-200 text-gray-600'\r\n                  }`}>\r\n                    {currentStep > 2 ? <FiCheck size={16} /> : '2'}\r\n                  </div>\r\n                  <h2 className=\"text-xl font-bold text-gray-800\">Payment Method</h2>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                  <label className=\"flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:border-orange-500 transition-colors\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"paymentMethod\"\r\n                      value=\"cod\"\r\n                      checked={paymentMethod === 'cod'}\r\n                      onChange={(e) => setPaymentMethod(e.target.value)}\r\n                      className=\"mr-4\"\r\n                    />\r\n                    <div className=\"flex items-center\">\r\n                      <FiTruck className=\"text-green-500 mr-3\" size={24} />\r\n                      <div>\r\n                        <p className=\"font-semibold\">Cash on Delivery</p>\r\n                        <p className=\"text-sm text-gray-600\">Pay when your order arrives</p>\r\n                      </div>\r\n                    </div>\r\n                  </label>\r\n\r\n                  <label className=\"flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:border-orange-500 transition-colors\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"paymentMethod\"\r\n                      value=\"card\"\r\n                      checked={paymentMethod === 'card'}\r\n                      onChange={(e) => setPaymentMethod(e.target.value)}\r\n                      className=\"mr-4\"\r\n                    />\r\n                    <div className=\"flex items-center\">\r\n                      <FiCreditCard className=\"text-blue-500 mr-3\" size={24} />\r\n                      <div>\r\n                        <p className=\"font-semibold\">Credit/Debit Card</p>\r\n                        <p className=\"text-sm text-gray-600\">Secure online payment</p>\r\n                      </div>\r\n                    </div>\r\n                  </label>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={() => setCurrentStep(3)}\r\n                  className=\"mt-6 bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition-colors font-semibold flex items-center\"\r\n                >\r\n                  Review Order\r\n                  <FiArrowLeft className=\"ml-2 rotate-180\" />\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 3: Order Notes */}\r\n            {currentStep >= 3 && (\r\n              <div className=\"bg-white rounded-xl shadow-lg p-6 border border-gray-100\">\r\n                <div className=\"flex items-center mb-6\">\r\n                  <div className=\"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center text-sm font-bold mr-3\">\r\n                    3\r\n                  </div>\r\n                  <h2 className=\"text-xl font-bold text-gray-800\">Order Notes (Optional)</h2>\r\n                </div>\r\n\r\n                <textarea\r\n                  value={orderNotes}\r\n                  onChange={(e) => setOrderNotes(e.target.value)}\r\n                  placeholder=\"Any special instructions for your order...\"\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  rows=\"4\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Right Column - Order Summary */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white rounded-xl shadow-lg p-6 border border-gray-100 sticky top-4\">\r\n              <h3 className=\"text-xl font-bold text-gray-800 mb-6\">Order Summary</h3>\r\n\r\n              {/* Cart Items */}\r\n              <div className=\"space-y-4 mb-6\">\r\n                {cart.map((item) => (\r\n                  <div key={item._id || item.id} className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n                    <div className=\"flex-1\">\r\n                      <h4 className=\"font-medium text-gray-800\">{item.name}</h4>\r\n                      <p className=\"text-sm text-gray-600\">Qty: {item.quantity}</p>\r\n                    </div>\r\n                    <span className=\"font-semibold text-gray-800\">{item.price * item.quantity}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Pricing Breakdown */}\r\n              <div className=\"space-y-3 mb-6\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Subtotal</span>\r\n                  <span className=\"text-gray-800\">{subtotal}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Delivery Fee</span>\r\n                  <span className=\"text-gray-800\">\r\n                    {deliveryFee === 0 ? (\r\n                      <span className=\"text-green-600\">FREE</span>\r\n                    ) : (\r\n                      `${deliveryFee}`\r\n                    )}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Tax</span>\r\n                  <span className=\"text-gray-800\">{tax}</span>\r\n                </div>\r\n                <div className=\"border-t border-gray-200 pt-3\">\r\n                  <div className=\"flex justify-between text-lg font-bold\">\r\n                    <span className=\"text-gray-800\">Total</span>\r\n                    <span className=\"text-gray-800\">{total}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Security Notice */}\r\n              <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\r\n                <div className=\"flex items-center text-green-600 mb-2\">\r\n                  <FiShield className=\"mr-2\" size={16} />\r\n                  <span className=\"text-sm font-medium\">Secure Checkout</span>\r\n                </div>\r\n                <p className=\"text-xs text-gray-600\">\r\n                  Your payment information is encrypted and secure\r\n                </p>\r\n              </div>\r\n\r\n              {/* Place Order Button */}\r\n              {currentStep >= 3 && validateAddress() && (\r\n                <button\r\n                  onClick={handlePlaceOrder}\r\n                  disabled={loading}\r\n                  className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold py-4 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-300 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  {loading ? 'Placing Order...' : `Place Order  ${total}`}\r\n                </button>\r\n              )}\r\n            )}\r\n\r\n            {/* Step 2: Payment Method */}\r\n            {currentStep === 2 && (\r\n              <div className={`rounded-xl shadow-lg p-6 border transition-all ${\r\n                isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'\r\n              }`}>\r\n                <div className=\"flex items-center mb-6\">\r\n                  <FiCreditCard className=\"w-6 h-6 mr-3 text-green-500\" />\r\n                  <h2 className={`text-xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-800'}`}>\r\n                    Payment Method\r\n                  </h2>\r\n                </div>\r\n\r\n                <div className=\"space-y-4 mb-6\">\r\n                  {/* Cash on Delivery */}\r\n                  <div className={`p-4 border-2 rounded-xl cursor-pointer transition-all ${\r\n                    paymentMethod === 'cod' \r\n                      ? 'border-green-500 bg-green-50 dark:bg-green-900/20' \r\n                      : isDarkMode ? 'border-gray-700 bg-gray-700/50' : 'border-gray-200 bg-gray-50'\r\n                  }`} onClick={() => setPaymentMethod('cod')}>\r\n                    <div className=\"flex items-center\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"paymentMethod\"\r\n                        value=\"cod\"\r\n                        checked={paymentMethod === 'cod'}\r\n                        onChange={() => setPaymentMethod('cod')}\r\n                        className=\"mr-3 text-green-500\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <h3 className={`font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                          Cash on Delivery\r\n                        </h3>\r\n                        <p className={`text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                          Pay with cash when your order arrives\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Online Payment */}\r\n                  <div className={`p-4 border-2 rounded-xl cursor-pointer transition-all ${\r\n                    paymentMethod === 'card' \r\n                      ? 'border-green-500 bg-green-50 dark:bg-green-900/20' \r\n                      : isDarkMode ? 'border-gray-700 bg-gray-700/50' : 'border-gray-200 bg-gray-50'\r\n                  }`} onClick={() => setPaymentMethod('card')}>\r\n                    <div className=\"flex items-center\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"paymentMethod\"\r\n                        value=\"card\"\r\n                        checked={paymentMethod === 'card'}\r\n                        onChange={() => setPaymentMethod('card')}\r\n                        className=\"mr-3 text-green-500\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <h3 className={`font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                          Online Payment\r\n                        </h3>\r\n                        <p className={`text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                          Pay securely with UPI, Cards, Net Banking\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"text-xs text-green-600 font-medium\">Secure</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex space-x-4\">\r\n                  <button\r\n                    onClick={() => setCurrentStep(1)}\r\n                    className={`flex-1 py-3 px-6 rounded-xl font-semibold transition-all ${\r\n                      isDarkMode \r\n                        ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' \r\n                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                    }`}\r\n                  >\r\n                     Back\r\n                  </button>\r\n                  <button\r\n                    onClick={handlePaymentMethodSubmit}\r\n                    disabled={stepLoading}\r\n                    className={`flex-1 py-3 px-6 rounded-xl font-semibold text-white transition-all disabled:opacity-50 ${\r\n                      isDarkMode\r\n                        ? 'bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 shadow-lg shadow-green-500/25'\r\n                        : 'bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 shadow-lg hover:shadow-xl'\r\n                    }`}\r\n                  >\r\n                    {stepLoading ? (\r\n                      <div className=\"flex items-center justify-center\">\r\n                        <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"></div>\r\n                        Processing...\r\n                      </div>\r\n                    ) : (\r\n                      'Continue to Review'\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 3: Order Review */}\r\n            {currentStep === 3 && (\r\n              <div className={`rounded-xl shadow-lg p-6 border transition-all ${\r\n                isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'\r\n              }`}>\r\n                <div className=\"flex items-center mb-6\">\r\n                  <FiCheck className=\"w-6 h-6 mr-3 text-blue-500\" />\r\n                  <h2 className={`text-xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-800'}`}>\r\n                    Review Your Order\r\n                  </h2>\r\n                </div>\r\n\r\n                {/* Address Summary */}\r\n                <div className={`p-4 rounded-lg mb-4 ${isDarkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\r\n                  <h3 className={`font-semibold mb-2 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                    Delivery Address\r\n                  </h3>\r\n                  <p className={`text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                    {deliveryAddress.fullName}<br />\r\n                    {deliveryAddress.addressLine1}{deliveryAddress.addressLine2 && `, ${deliveryAddress.addressLine2}`}<br />\r\n                    {deliveryAddress.city}, {deliveryAddress.state} - {deliveryAddress.pincode}<br />\r\n                    Phone: {deliveryAddress.phone}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Payment Method Summary */}\r\n                <div className={`p-4 rounded-lg mb-6 ${isDarkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\r\n                  <h3 className={`font-semibold mb-2 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                    Payment Method\r\n                  </h3>\r\n                  <p className={`text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                    {paymentMethod === 'cod' ? 'Cash on Delivery' : 'Online Payment (Razorpay)'}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Order Notes */}\r\n                <div className=\"mb-6\">\r\n                  <label className={`block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                    Order Notes (Optional)\r\n                  </label>\r\n                  <textarea\r\n                    value={orderNotes}\r\n                    onChange={(e) => setOrderNotes(e.target.value)}\r\n                    placeholder=\"Any special instructions for your order...\"\r\n                    className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none ${\r\n                      isDarkMode \r\n                        ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' \r\n                        : 'bg-white border-gray-300 text-gray-900'\r\n                    }`}\r\n                    rows=\"3\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"flex space-x-4\">\r\n                  <button\r\n                    onClick={() => setCurrentStep(2)}\r\n                    className={`flex-1 py-3 px-6 rounded-xl font-semibold transition-all ${\r\n                      isDarkMode \r\n                        ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' \r\n                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                    }`}\r\n                  >\r\n                     Back\r\n                  </button>\r\n                  <button\r\n                    onClick={handlePlaceOrder}\r\n                    disabled={loading}\r\n                    className={`flex-1 py-4 px-6 rounded-xl font-bold text-white transition-all disabled:opacity-50 ${\r\n                      isDarkMode\r\n                        ? 'bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 shadow-lg shadow-blue-500/25'\r\n                        : 'bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 shadow-lg hover:shadow-xl'\r\n                    }`}\r\n                  >\r\n                    {loading ? (\r\n                      <div className=\"flex items-center justify-center\">\r\n                        <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"></div>\r\n                        Placing Order...\r\n                      </div>\r\n                    ) : (\r\n                      <>\r\n                        <FiShield className=\"w-5 h-5 mr-2 inline\" />\r\n                        Place Order - {total.toFixed(2)}\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Right Column - Order Summary */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className={`rounded-xl shadow-lg p-6 border sticky top-4 ${\r\n              isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'\r\n            }`}>\r\n              <h3 className={`text-xl font-bold mb-4 ${isDarkMode ? 'text-white' : 'text-gray-800'}`}>\r\n                Order Summary\r\n              </h3>\r\n              \r\n              {/* Cart Items */}\r\n              <div className=\"space-y-3 mb-4 max-h-60 overflow-y-auto\">\r\n                {cart.map((item) => (\r\n                  <div key={item._id} className=\"flex justify-between items-start\">\r\n                    <div className=\"flex-1\">\r\n                      <p className={`font-medium text-sm ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                        {item.product?.name || item.name}\r\n                      </p>\r\n                      <p className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        Qty: {item.quantity || 1}\r\n                      </p>\r\n                    </div>\r\n                    <p className={`font-semibold text-sm ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                      {((item.product?.price || item.price || 0) * (item.quantity || 1)).toFixed(2)}\r\n                    </p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <div className={`border-t pt-4 space-y-2 ${isDarkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                <div className=\"flex justify-between\">\r\n                  <span className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Subtotal</span>\r\n                  <span className={isDarkMode ? 'text-white' : 'text-gray-900'}>{subtotal.toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Delivery Fee</span>\r\n                  <span className={`${deliveryFee === 0 ? 'text-green-500' : ''} ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                    {deliveryFee === 0 ? 'FREE' : `${deliveryFee.toFixed(2)}`}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Tax (5%)</span>\r\n                  <span className={isDarkMode ? 'text-white' : 'text-gray-900'}>{tax.toFixed(2)}</span>\r\n                </div>\r\n                <div className={`flex justify-between text-lg font-bold pt-2 border-t ${\r\n                  isDarkMode ? 'border-gray-700 text-white' : 'border-gray-200 text-gray-900'\r\n                }`}>\r\n                  <span>Total</span>\r\n                  <span>{total.toFixed(2)}</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Security Badge */}\r\n              <div className={`mt-4 p-3 rounded-lg text-center ${isDarkMode ? 'bg-green-900/20' : 'bg-green-50'}`}>\r\n                <FiShield className=\"w-5 h-5 mx-auto mb-1 text-green-500\" />\r\n                <p className=\"text-xs text-green-600 font-medium\">\r\n                  Your payment information is encrypted and secure\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
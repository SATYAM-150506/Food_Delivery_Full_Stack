{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useDarkMode}from'../../Context/DarkModeContext';import orderService from'../../services/orderService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrderHistory=()=>{const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const{isDarkMode}=useDarkMode();useEffect(()=>{const fetchOrders=async()=>{try{setLoading(true);setError(null);const data=await orderService.getOrders();// Ensure data is an array\nsetOrders(Array.isArray(data)?data:[]);}catch(error){console.error('Failed to fetch orders:',error);setError('Failed to load orders. Please try again.');setOrders([]);// Ensure orders is always an array\n}finally{setLoading(false);}};fetchOrders();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 min-h-screen \".concat(isDarkMode?'bg-gray-900':'bg-gray-50'),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"Order History\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 \".concat(isDarkMode?'bg-gray-800':'bg-white',\" rounded-lg shadow-sm\"),children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:\"Loading orders...\"})}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 \".concat(isDarkMode?'bg-gray-800':'bg-white',\" rounded-lg shadow-sm\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-red-500 mb-2\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg\",children:\"Try Again\"})]}):orders.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 \".concat(isDarkMode?'bg-gray-800':'bg-white',\" rounded-lg shadow-sm\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:\"No orders found.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2 \".concat(isDarkMode?'text-gray-500':'text-gray-500'),children:\"Your order history will appear here once you place an order.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full rounded-lg shadow-sm \".concat(isDarkMode?'bg-gray-800':'bg-white'),children:[/*#__PURE__*/_jsx(\"thead\",{className:\"\".concat(isDarkMode?'bg-gray-700':'bg-gray-50'),children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"Order ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold \".concat(isDarkMode?'text-gray-300':'text-gray-700'),children:\"Total\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y \".concat(isDarkMode?'divide-gray-600':'divide-gray-200'),children:Array.isArray(orders)&&orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{className:\"transition-colors \".concat(isDarkMode?'hover:bg-gray-700':'hover:bg-gray-50'),children:[/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-4 font-mono text-sm \".concat(isDarkMode?'text-gray-100':'text-gray-900'),children:[\"#\",order._id.slice(-6)]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:new Date(order.createdAt).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-medium \".concat(order.status==='completed'||order.status==='confirmed'?isDarkMode?'bg-green-900/30 text-green-300':'bg-green-100 text-green-800':order.status==='pending'?isDarkMode?'bg-yellow-900/30 text-yellow-300':'bg-yellow-100 text-yellow-800':isDarkMode?'bg-red-900/30 text-red-300':'bg-red-100 text-red-800'),children:order.status})}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-4 font-semibold \".concat(isDarkMode?'text-gray-100':'text-gray-900'),children:[\"\\u20B9\",order.total]})]},order._id))})]})})]});};export default OrderHistory;","map":{"version":3,"names":["React","useEffect","useState","useDarkMode","orderService","jsx","_jsx","jsxs","_jsxs","OrderHistory","orders","setOrders","loading","setLoading","error","setError","isDarkMode","fetchOrders","data","getOrders","Array","isArray","console","className","concat","children","onClick","window","location","reload","length","map","order","_id","slice","Date","createdAt","toLocaleDateString","status","total"],"sources":["D:/food_delievery2/frontend/src/assets/pages/Orders/OrderHistory.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDarkMode } from '../../Context/DarkModeContext';\r\nimport orderService from '../../services/orderService';\r\n\r\nconst OrderHistory = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const { isDarkMode } = useDarkMode();\r\n\r\n  useEffect(() => {\r\n    const fetchOrders = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        const data = await orderService.getOrders();\r\n        // Ensure data is an array\r\n        setOrders(Array.isArray(data) ? data : []);\r\n      } catch (error) {\r\n        console.error('Failed to fetch orders:', error);\r\n        setError('Failed to load orders. Please try again.');\r\n        setOrders([]); // Ensure orders is always an array\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  return (\r\n    <div className={`p-6 min-h-screen ${isDarkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\r\n      <h2 className={`text-2xl font-bold mb-4 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Order History</h2>\r\n      \r\n      {loading ? (\r\n        <div className={`text-center py-12 ${isDarkMode ? 'bg-gray-800' : 'bg-white'} rounded-lg shadow-sm`}>\r\n          <p className={`text-lg ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Loading orders...</p>\r\n        </div>\r\n      ) : error ? (\r\n        <div className={`text-center py-12 ${isDarkMode ? 'bg-gray-800' : 'bg-white'} rounded-lg shadow-sm`}>\r\n          <p className={`text-lg text-red-500 mb-2`}>{error}</p>\r\n          <button \r\n            onClick={() => window.location.reload()} \r\n            className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg\"\r\n          >\r\n            Try Again\r\n          </button>\r\n        </div>\r\n      ) : orders.length === 0 ? (\r\n        <div className={`text-center py-12 ${isDarkMode ? 'bg-gray-800' : 'bg-white'} rounded-lg shadow-sm`}>\r\n          <p className={`text-lg ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>No orders found.</p>\r\n          <p className={`text-sm mt-2 ${isDarkMode ? 'text-gray-500' : 'text-gray-500'}`}>\r\n            Your order history will appear here once you place an order.\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"overflow-x-auto\">\r\n          <table className={`min-w-full rounded-lg shadow-sm ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\r\n            <thead className={`${isDarkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\r\n              <tr>\r\n                <th className={`py-3 px-4 text-left font-semibold ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>Order ID</th>\r\n                <th className={`py-3 px-4 text-left font-semibold ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>Date</th>\r\n                <th className={`py-3 px-4 text-left font-semibold ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>Status</th>\r\n                <th className={`py-3 px-4 text-left font-semibold ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>Total</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className={`divide-y ${isDarkMode ? 'divide-gray-600' : 'divide-gray-200'}`}>\r\n              {Array.isArray(orders) && orders.map(order => (\r\n                <tr key={order._id} className={`transition-colors ${\r\n                  isDarkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-50'\r\n                }`}>\r\n                  <td className={`py-3 px-4 font-mono text-sm ${isDarkMode ? 'text-gray-100' : 'text-gray-900'}`}>\r\n                    #{order._id.slice(-6)}\r\n                  </td>\r\n                  <td className={`py-3 px-4 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                    {new Date(order.createdAt).toLocaleDateString()}\r\n                  </td>\r\n                  <td className=\"py-3 px-4\">\r\n                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                      order.status === 'completed' || order.status === 'confirmed'\r\n                        ? isDarkMode ? 'bg-green-900/30 text-green-300' : 'bg-green-100 text-green-800'\r\n                        : order.status === 'pending' \r\n                        ? isDarkMode ? 'bg-yellow-900/30 text-yellow-300' : 'bg-yellow-100 text-yellow-800'\r\n                        : isDarkMode ? 'bg-red-900/30 text-red-300' : 'bg-red-100 text-red-800'\r\n                    }`}>\r\n                      {order.status}\r\n                    </span>\r\n                  </td>\r\n                  <td className={`py-3 px-4 font-semibold ${isDarkMode ? 'text-gray-100' : 'text-gray-900'}`}>\r\n                    â‚¹{order.total}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderHistory;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}